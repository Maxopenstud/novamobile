<?xml version="1.0" encoding="UTF-8"?>
<modification>
    <name>About us</name>
    <code>about_us</code>
    <version>1.0</version>
    <date>21.10.2023</date>
    <author>author</author>
    <link>author</link>
    
    <file path="catalog/controller/information/information.php">
        <operation>
            <search><![CDATA[$information_info = ]]></search>
            <add position="before">
                <![CDATA[
                    $about_us_redirect_id = $this->load->controller('custom/setting/getValue', array(
                        'section' => 'about_us', // Unique section identifier
                        'setting' => 'au_information_redirect', // Unique field identifier
                        'page' => 'module_about_us' // Form code in the admin panel
                    ));
                    if ($this->config->get('module_about_us_status') && ($this->request->get['information_id'] == $about_us_redirect_id['value'])) {
                        return $this->load->controller('extension/module/about_us');
                    }
                ]]>
            </add>
        </operation>
    </file>

    <file path="catalog/controller/common/{content_top,content_bottom,column_left_column_right}.php">
        <operation>
            <search><![CDATA[$layout_id = $this->model_design_layout->getLayout($route);]]></search>
            <add position="before" offset="2">
                <![CDATA[
                    $about_us_redirect_id = $this->load->controller('custom/setting/getValue', array(
                        'section' => 'about_us', // Unique section identifier
                        'setting' => 'au_information_redirect', // Unique field identifier
                        'page' => 'module_about_us' // Form code in the admin panel
                    ));
                    if ($this->config->get('module_about_us_status') && ($this->request->get['route'] == 'extension/module/about_us' || isset($this->request->get['information_id']) && $this->request->get['information_id'] == $about_us_redirect_id['value'])) {
                        $layout_id = $this->load->controller('custom/setting/getValue', array(
                            'section' => 'about_us', // Unique section identifier
                            'setting' => 'au_layout', // Unique field identifier
                            'page' => 'module_about_us' // Form code in the admin panel
                        ))['value'] ?? false;
                    }
                ]]>
            </add>
        </operation>
    </file>
</modification>